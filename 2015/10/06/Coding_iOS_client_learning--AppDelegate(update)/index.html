<!doctype html>
<html class="theme-next   use-motion ">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="google-site-verification" content="ArxqF9fNvIlxybI0naTgEy2PwvvvHyAs35iOfxJqL8o" />










  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.4.5.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="iOS,Coding源码," />





  <link rel="alternate" href="/atom.xml" title="Ivan's Blog" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.2" />






<meta name="description" content="写在前面Coding客户端 AppDelegate AppDelegate.h  12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152////  AppDelegate.h//  Coding_iOS////  Created by 王 原闯 on 14-7-2">
<meta name="keywords" content="iOS,Coding源码">
<meta property="og:type" content="article">
<meta property="og:title" content="Coding iOS客户端学习--AppDelegate(持续更新，有关Core Data的内容未来更新)">
<meta property="og:url" content="http://yeziahehe.com/2015/10/06/Coding_iOS_client_learning--AppDelegate(update)/index.html">
<meta property="og:site_name" content="Ivan&#39;s Blog">
<meta property="og:description" content="写在前面Coding客户端 AppDelegate AppDelegate.h  12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152////  AppDelegate.h//  Coding_iOS////  Created by 王 原闯 on 14-7-2">
<meta property="og:image" content="http://yeziahehe.com/cc.png">
<meta property="og:updated_time" content="2016-09-02T03:02:32.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Coding iOS客户端学习--AppDelegate(持续更新，有关Core Data的内容未来更新)">
<meta name="twitter:description" content="写在前面Coding客户端 AppDelegate AppDelegate.h  12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152////  AppDelegate.h//  Coding_iOS////  Created by 王 原闯 on 14-7-2">
<meta name="twitter:image" content="http://yeziahehe.com/cc.png">



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    sidebar: 'hide',
    motion: true
  };
</script>

  <title> Coding iOS客户端学习--AppDelegate(持续更新，有关Core Data的内容未来更新) | Ivan's Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  






  <div class="container one-column page-post-detail">
    <div class="headband"></div>

    <a href="https://github.com/yeziahehe"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Ivan's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-oj">
          <a href="/categories/LeetCode-OJ/" rel="section">
            
              <i class="menu-item-icon fa fa-question-circle fa-fw"></i> <br />
            
            LeetCode OJ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-user fa-fw"></i> <br />
            
            关于
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Coding iOS客户端学习--AppDelegate(持续更新，有关Core Data的内容未来更新)
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-10-06T23:28:44+08:00" content="2015-10-06">
              2015-10-06
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          <span class="post-count">
            &nbsp; | &nbsp; 字数
              9,235
          </span>

          
            <span id="busuanzi_container_page_pv">
              &nbsp; | &nbsp;
              <i class="fa fa-eye"></i>&nbsp;
              <span id="busuanzi_value_page_pv">1</span>
            </span>
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        <span itemprop="articleBody"><h3 id="u5199_u5728_u524D_u9762"><a href="#u5199_u5728_u524D_u9762" class="headerlink" title="写在前面"></a>写在前面</h3><p><a href="https://coding.net/u/coding/p/Coding-iOS/git" target="_blank" rel="external">Coding客户端</a></p>
<h3 id="AppDelegate"><a href="#AppDelegate" class="headerlink" title="AppDelegate"></a>AppDelegate</h3><ul>
<li>AppDelegate.h</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//  AppDelegate.h</span></div><div class="line"><span class="comment">//  Coding_iOS</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//  Created by 王 原闯 on 14-7-29.</span></div><div class="line"><span class="comment">//  Copyright (c) 2014年 Coding. All rights reserved.</span></div><div class="line"><span class="comment">//</span></div><div class="line"></div><div class="line"><span class="meta">#import <span class="meta-string">&lt;UIKit/UIKit.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">AppDelegate</span> : <span class="title">UIResponder</span> &lt;<span class="title">UIApplicationDelegate</span>&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) <span class="built_in">UIWindow</span> *window;</div><div class="line"><span class="comment">/**</span></div><div class="line"> *  @author 叶帆</div><div class="line"> *</div><div class="line"> *  @brief  Core Data</div><div class="line"> */</div><div class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>, <span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSManagedObjectContext</span> *managedObjectContext;</div><div class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>, <span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSManagedObjectModel</span> *managedObjectModel;</div><div class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>, <span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSPersistentStoreCoordinator</span> *persistentStoreCoordinator;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> *  @author 叶帆</div><div class="line"> *</div><div class="line"> *  @brief  存储Core Data中的managedObjectContext</div><div class="line">            一旦出现managedObjectContext change或者error</div><div class="line">            则使用abort()函数[abort()代码层面进行APP的终止，在开发时用于测试使用，线上程序不使用，回引起崩溃]</div><div class="line"> */</div><div class="line">- (<span class="keyword">void</span>)saveContext;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> *  @author 叶帆</div><div class="line"> *</div><div class="line"> *  @brief  Core Data中To access the Documents directory of your applications sandbox</div><div class="line"> */</div><div class="line">- (<span class="built_in">NSURL</span> *)applicationDocumentsDirectory;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> *  @author 叶帆</div><div class="line"> *</div><div class="line"> *  @brief  根据不同的情况设置TabBar主框架，登录界面，引导页为RootViewController</div><div class="line"> */</div><div class="line">- (<span class="keyword">void</span>)setupTabViewController;</div><div class="line">- (<span class="keyword">void</span>)setupLoginViewController;</div><div class="line">- (<span class="keyword">void</span>)setupIntroductionViewController;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> *  注册推送</div><div class="line"> */</div><div class="line">- (<span class="keyword">void</span>)registerPush;</div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<ul>
<li>AppDelegate.m</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div><div class="line">466</div><div class="line">467</div><div class="line">468</div><div class="line">469</div><div class="line">470</div><div class="line">471</div><div class="line">472</div><div class="line">473</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//  AppDelegate.m</span></div><div class="line"><span class="comment">//  Coding_iOS</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//  Created by 王 原闯 on 14-7-29.</span></div><div class="line"><span class="comment">//  Copyright (c) 2014年 Coding. All rights reserved.</span></div><div class="line"><span class="comment">//</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="meta">#define UMSYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(v) ([[[UIDevice currentDevice] systemVersion] compare:v options:NSNumericSearch] != NSOrderedAscending)</span></div><div class="line"><span class="meta">#define _IPHONE80_ 80000</span></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="meta">#import <span class="meta-string">"AppDelegate.h"</span></span></div><div class="line"><span class="meta">#import <span class="meta-string">"RootTabViewController.h"</span>               //通用 TabBarViewController</span></div><div class="line"><span class="meta">#import <span class="meta-string">"LoginViewController.h"</span>                 //登录 VC</span></div><div class="line"><span class="meta">#import <span class="meta-string">"AFNetworking.h"</span>                        //网络库</span></div><div class="line"><span class="meta">#import <span class="meta-string">"AFNetworkActivityIndicatorManager.h"</span>   //网络小菊花</span></div><div class="line"><span class="meta">#import <span class="meta-string">"Login.h"</span>                               //Login Model</span></div><div class="line"><span class="meta">#import <span class="meta-string">"UnReadManager.h"</span>                       //未读消息 Model，同时更新应用角标</span></div><div class="line"><span class="meta">#import <span class="meta-string">"XGPush.h"</span>                              //信鸽推送</span></div><div class="line"><span class="meta">#import <span class="meta-string">"EaseStartView.h"</span>                       //启动图</span></div><div class="line"><span class="meta">#import <span class="meta-string">"BaseNavigationController.h"</span>            //通用 NavigationController</span></div><div class="line"><span class="meta">#import <span class="meta-string">"PasswordViewController.h"</span>              //用户激活或者密码 VC</span></div><div class="line"><span class="meta">#import <span class="meta-string">"IntroductionViewController.h"</span>          //引导 VC</span></div><div class="line"><span class="meta">#import <span class="meta-string">"FunctionIntroManager.h"</span>                //引导 Model</span></div><div class="line"><span class="meta">#import <span class="meta-string">&lt;UMengSocial/UMSocial.h&gt;</span>                //友盟统计分析组件</span></div><div class="line"><span class="meta">#import <span class="meta-string">&lt;UMengSocial/UMSocialWechatHandler.h&gt;</span>   //友盟WeChat分享组件</span></div><div class="line"><span class="meta">#import <span class="meta-string">&lt;UMengSocial/UMSocialQQHandler.h&gt;</span>       //友盟QQ分享组件</span></div><div class="line"><span class="meta">#import <span class="meta-string">&lt;evernote-cloud-sdk-ios/ENSDK/ENSDK.h&gt;</span>  //印象笔记SDK</span></div><div class="line"><span class="meta">#import <span class="meta-string">"UMSocialSinaSSOHandler.h"</span>              //友盟Sina分享组件</span></div><div class="line"></div><div class="line"><span class="meta">#import <span class="meta-string">"Tweet.h"</span></span></div><div class="line"><span class="meta">#import <span class="meta-string">"sys/utsname.h"</span>                         //Apple提供的获取设备硬件版本和系统版本</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">AppDelegate</span></span></div><div class="line"></div><div class="line"><span class="keyword">@synthesize</span> managedObjectContext = _managedObjectContext;</div><div class="line"><span class="keyword">@synthesize</span> managedObjectModel = _managedObjectModel;</div><div class="line"><span class="keyword">@synthesize</span> persistentStoreCoordinator = _persistentStoreCoordinator;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> *  @author 叶帆</div><div class="line"> *</div><div class="line"> *  @brief  信鸽推送</div><div class="line">            区分 iOS 7, iOS 8, iOS 9 推送模式 (下个版本不支持iOS 7)</div><div class="line">            1. app在前台运行时，不弹出推送框，但是app通过代码可以获取到推送的消息。</div><div class="line">            2. app在后台运行或者杀死状态时，会弹出推送框并且可以通过代码获取到推送的消息。</div><div class="line">            3. app在前台和后台运行时，推送上报触发的是didReceiveRemoteNotification事件。</div><div class="line">            4. app在杀死状态时，推送上报触发的是didFinishLaunchingWithOptions事件。</div><div class="line"> */</div><div class="line"><span class="meta">#pragma mark XGPush</span></div><div class="line">- (<span class="keyword">void</span>)registerPush&#123;</div><div class="line">    <span class="keyword">float</span> sysVer = [[[<span class="built_in">UIDevice</span> currentDevice] systemVersion] floatValue];</div><div class="line">    <span class="keyword">if</span>(sysVer &lt; <span class="number">8</span>)&#123;</div><div class="line">        [[<span class="built_in">UIApplication</span> sharedApplication] registerForRemoteNotificationTypes:(<span class="built_in">UIRemoteNotificationTypeAlert</span> | <span class="built_in">UIRemoteNotificationTypeBadge</span> | <span class="built_in">UIRemoteNotificationTypeSound</span>)];</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line"><span class="meta">#if __IPHONE_OS_VERSION_MAX_ALLOWED &gt;= _IPHONE80_</span></div><div class="line">        <span class="built_in">UIMutableUserNotificationCategory</span> *categorys = [[<span class="built_in">UIMutableUserNotificationCategory</span> alloc] init];</div><div class="line">        <span class="built_in">UIUserNotificationSettings</span> *userSettings = [<span class="built_in">UIUserNotificationSettings</span> settingsForTypes:<span class="built_in">UIUserNotificationTypeBadge</span>|<span class="built_in">UIUserNotificationTypeSound</span>|<span class="built_in">UIUserNotificationTypeAlert</span></div><div class="line">                                                                                     categories:[<span class="built_in">NSSet</span> setWithObject:categorys]];</div><div class="line">        [[<span class="built_in">UIApplication</span> sharedApplication] registerUserNotificationSettings:userSettings];</div><div class="line">        [[<span class="built_in">UIApplication</span> sharedApplication] registerForRemoteNotifications];</div><div class="line"><span class="meta">#endif</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> *  @author 叶帆</div><div class="line"> *</div><div class="line"> *  @brief  UserAgent 加入版本号到header中user agent</div><div class="line"> */</div><div class="line"><span class="meta">#pragma mark UserAgent</span></div><div class="line">- (<span class="keyword">void</span>)registerUserAgent&#123;</div><div class="line">    <span class="keyword">struct</span> utsname systemInfo;</div><div class="line">    uname(&amp;systemInfo);</div><div class="line">    <span class="built_in">NSString</span> *deviceString = [<span class="built_in">NSString</span> stringWithCString:systemInfo.machine encoding:<span class="built_in">NSUTF8StringEncoding</span>];</div><div class="line">    <span class="built_in">NSString</span> *userAgent = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%@/%@ (%@; iOS %@; Scale/%0.2f)"</span>, [[[<span class="built_in">NSBundle</span> mainBundle] infoDictionary] objectForKey:(__bridge <span class="built_in">NSString</span> *)kCFBundleExecutableKey] ?: [[[<span class="built_in">NSBundle</span> mainBundle] infoDictionary] objectForKey:(__bridge <span class="built_in">NSString</span> *)kCFBundleIdentifierKey], (__bridge <span class="keyword">id</span>)<span class="built_in">CFBundleGetValueForInfoDictionaryKey</span>(<span class="built_in">CFBundleGetMainBundle</span>(), kCFBundleVersionKey) ?: [[[<span class="built_in">NSBundle</span> mainBundle] infoDictionary] objectForKey:(__bridge <span class="built_in">NSString</span> *)kCFBundleVersionKey], deviceString, [[<span class="built_in">UIDevice</span> currentDevice] systemVersion], ([[<span class="built_in">UIScreen</span> mainScreen] respondsToSelector:<span class="keyword">@selector</span>(scale)] ? [[<span class="built_in">UIScreen</span> mainScreen] scale] : <span class="number">1.0</span>f)];</div><div class="line">    <span class="built_in">NSDictionary</span> *dictionary = @&#123;<span class="string">@"UserAgent"</span> : userAgent&#125;;<span class="comment">//User-Agent</span></div><div class="line">    [[<span class="built_in">NSUserDefaults</span> standardUserDefaults] registerDefaults:dictionary];</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="meta">#pragma lifeCycle</span></div><div class="line">- (<span class="built_in">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application didFinishLaunchingWithOptions:(<span class="built_in">NSDictionary</span> *)launchOptions</div><div class="line">&#123;</div><div class="line">    <span class="keyword">self</span>.window = [[<span class="built_in">UIWindow</span> alloc] initWithFrame:[[<span class="built_in">UIScreen</span> mainScreen] bounds]];</div><div class="line">    <span class="comment">// Override point for customization after application launch.</span></div><div class="line">    <span class="keyword">self</span>.window.backgroundColor = [<span class="built_in">UIColor</span> whiteColor];</div><div class="line"></div><div class="line">    <span class="comment">//网络</span></div><div class="line">    [[AFNetworkActivityIndicatorManager sharedManager] setEnabled:<span class="literal">YES</span>];</div><div class="line">    [[AFNetworkReachabilityManager sharedManager] startMonitoring];</div><div class="line"></div><div class="line">    <span class="comment">//sd加载的数据类型</span></div><div class="line">    [[[SDWebImageManager sharedManager] imageDownloader] setValue:<span class="string">@"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8"</span> forHTTPHeaderField:<span class="string">@"Accept"</span>];</div><div class="line"></div><div class="line">    <span class="comment">//设置导航条样式</span></div><div class="line">    [<span class="keyword">self</span> customizeInterface];</div><div class="line">    [[<span class="built_in">UIApplication</span> sharedApplication] setStatusBarHidden:<span class="literal">NO</span> withAnimation:<span class="built_in">UIStatusBarAnimationFade</span>];</div><div class="line"></div><div class="line">    <span class="comment">//UIWebView 的 User-Agent</span></div><div class="line">    [<span class="keyword">self</span> registerUserAgent];</div><div class="line"></div><div class="line">    <span class="keyword">if</span> ([Login isLogin]) &#123;</div><div class="line">        [<span class="keyword">self</span> setupTabViewController];</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">        [<span class="built_in">UIApplication</span> sharedApplication].applicationIconBadgeNumber = <span class="number">0</span>;</div><div class="line">        [<span class="keyword">self</span> setupIntroductionViewController];</div><div class="line">    &#125;</div><div class="line">    [<span class="keyword">self</span>.window makeKeyAndVisible];</div><div class="line">    <span class="comment">/**</span></div><div class="line">     *  @author 叶帆</div><div class="line">     *</div><div class="line">     *  @brief  特殊引导页，用来显示节日或者重要的引导信息，与引导页不同，引导页所做的是登录是引导界面</div><div class="line">     */</div><div class="line">    [FunctionIntroManager showIntroPage];</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     *  @author 叶帆</div><div class="line">     *</div><div class="line">     *  @brief  欢迎页图片的显示动画</div><div class="line">     */</div><div class="line">    EaseStartView *startView = [EaseStartView startView];</div><div class="line">    @weakify(<span class="keyword">self</span>);</div><div class="line">    [startView startAnimationWithCompletionBlock:^(EaseStartView *easeStartView) &#123;</div><div class="line">        @strongify(<span class="keyword">self</span>);</div><div class="line">        [<span class="keyword">self</span> completionStartAnimationWithOptions:launchOptions];</div><div class="line">    &#125;];</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> *  @author 叶帆</div><div class="line"> *</div><div class="line"> *  @brief  处理消息推送，用于固定推送的页面跳转和消息的状态</div><div class="line">            加入友盟统计，社会化分享组件</div><div class="line"> */</div><div class="line">- (<span class="keyword">void</span>)completionStartAnimationWithOptions:(<span class="built_in">NSDictionary</span> *)launchOptions&#123;</div><div class="line">    <span class="keyword">if</span> ([Login isLogin]) &#123;</div><div class="line">        <span class="built_in">NSDictionary</span> *remoteNotification = [launchOptions valueForKey:<span class="built_in">UIApplicationLaunchOptionsRemoteNotificationKey</span>];</div><div class="line">        <span class="keyword">if</span> (remoteNotification) &#123;</div><div class="line">            [BaseViewController handleNotificationInfo:remoteNotification applicationState:<span class="built_in">UIApplicationStateInactive</span>];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//    UMENG 统计</span></div><div class="line">    [MobClick startWithAppkey:kUmeng_AppKey reportPolicy:BATCH channelId:<span class="literal">nil</span>];</div><div class="line"></div><div class="line">    <span class="comment">//    UMENG Social Account</span></div><div class="line">    [UMSocialData setAppKey:kUmeng_AppKey];</div><div class="line">    [UMSocialWechatHandler setWXAppId:kSocial_WX_ID appSecret:kSocial_WX_Secret url:[<span class="built_in">NSObject</span> baseURLStr]];</div><div class="line">    [UMSocialQQHandler setQQWithAppId:kSocial_QQ_ID appKey:kSocial_QQ_Secret url:[<span class="built_in">NSObject</span> baseURLStr]];</div><div class="line">    [ENSession setSharedSessionConsumerKey:kSocial_EN_Key consumerSecret:kSocial_EN_Secret optionalHost:<span class="literal">nil</span>];</div><div class="line">    [UMSocialSinaSSOHandler openNewSinaSSOWithRedirectURL:kSocial_Sina_RedirectURL];</div><div class="line"></div><div class="line">    <span class="comment">//    UMENG Social Config</span></div><div class="line">    [UMSocialConfig setFollowWeiboUids:@&#123;UMShareToSina : kSocial_Sina_OfficailAccount&#125;];<span class="comment">//设置默认关注官方账号</span></div><div class="line">    [UMSocialConfig setFinishToastIsHidden:<span class="literal">YES</span> position:UMSocialiToastPositionCenter];</div><div class="line">    [UMSocialConfig setNavigationBarConfig:^(<span class="built_in">UINavigationBar</span> *bar, <span class="built_in">UIButton</span> *closeButton, <span class="built_in">UIButton</span> *backButton, <span class="built_in">UIButton</span> *postButton, <span class="built_in">UIButton</span> *refreshButton, <span class="built_in">UINavigationItem</span> *navigationItem) &#123;</div><div class="line">        <span class="keyword">if</span> (bar) &#123;</div><div class="line">            [bar setBackgroundImage:[<span class="built_in">UIImage</span> imageWithColor:[<span class="built_in">UIColor</span> colorWithHexString:[<span class="built_in">NSObject</span> baseURLStrIsTest]? <span class="string">@"0x3bbd79"</span> : <span class="string">@"0x28303b"</span>]] forBarMetrics:<span class="built_in">UIBarMetricsDefault</span>];</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (navigationItem) &#123;</div><div class="line">            <span class="keyword">if</span> ([[navigationItem titleView] isKindOfClass:[<span class="built_in">UILabel</span> <span class="keyword">class</span>]]) &#123;</div><div class="line">                <span class="built_in">UILabel</span> *titleL = (<span class="built_in">UILabel</span> *)[navigationItem titleView];</div><div class="line">                titleL.font = [<span class="built_in">UIFont</span> boldSystemFontOfSize:kNavTitleFontSize];</div><div class="line">                titleL.textColor = [<span class="built_in">UIColor</span> whiteColor];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;];</div><div class="line"></div><div class="line">    <span class="comment">//    信鸽推送</span></div><div class="line">    [XGPush startApp:kXGPush_Id appKey:kXGPush_Key];</div><div class="line">    [Login setXGAccountWithCurUser];</div><div class="line">    <span class="comment">//注销之后需要再次注册前的准备</span></div><div class="line">    @weakify(<span class="keyword">self</span>);</div><div class="line">    <span class="keyword">void</span> (^successCallback)(<span class="keyword">void</span>) = ^(<span class="keyword">void</span>)&#123;</div><div class="line">        <span class="comment">//如果变成需要注册状态</span></div><div class="line">        <span class="keyword">if</span>(![XGPush isUnRegisterStatus] &amp;&amp; [Login isLogin])&#123;</div><div class="line">            @strongify(<span class="keyword">self</span>);</div><div class="line">            [<span class="keyword">self</span> registerPush];</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    [XGPush initForReregister:successCallback];</div><div class="line"></div><div class="line">    <span class="comment">//[XGPush registerPush];  //注册Push服务，注册后才能收到推送</span></div><div class="line"></div><div class="line">    <span class="comment">//推送反馈(app不在前台运行时，点击推送激活时。统计而已)</span></div><div class="line">    [XGPush handleLaunching:launchOptions];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)applicationWillResignActive:(<span class="built_in">UIApplication</span> *)application</div><div class="line">&#123;</div><div class="line">    <span class="comment">// Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.</span></div><div class="line">    <span class="comment">// Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.</span></div><div class="line">    [[ImageSizeManager shareManager] save];</div><div class="line">    [[Tweet tweetForSend] saveSendData];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)applicationDidEnterBackground:(<span class="built_in">UIApplication</span> *)application</div><div class="line">&#123;</div><div class="line">    <span class="comment">// Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later.</span></div><div class="line">    <span class="comment">// If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)applicationWillEnterForeground:(<span class="built_in">UIApplication</span> *)application</div><div class="line">&#123;</div><div class="line">    <span class="comment">// Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> *  @author 叶帆</div><div class="line"> *</div><div class="line"> *  @brief  App Become Active 处理未读消息的操作</div><div class="line">            使用了clang push &amp; pop 用于保存和恢复编译器的状态，目的是消除当前的警告</div><div class="line"> */</div><div class="line">- (<span class="keyword">void</span>)applicationDidBecomeActive:(<span class="built_in">UIApplication</span> *)application</div><div class="line">&#123;</div><div class="line">    <span class="comment">// Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.</span></div><div class="line">    <span class="keyword">if</span> ([Login isLogin]) &#123;</div><div class="line">        [[UnReadManager shareManager] updateUnRead];</div><div class="line">        <span class="built_in">UIViewController</span> *presentingVC = [BaseViewController presentingVC];</div><div class="line">        SEL selector = <span class="built_in">NSSelectorFromString</span>(<span class="string">@"refresh"</span>);</div><div class="line">        <span class="keyword">if</span> ([presentingVC isKindOfClass:<span class="built_in">NSClassFromString</span>(<span class="string">@"Message_RootViewController"</span>)]</div><div class="line">            &amp;&amp; [presentingVC respondsToSelector:selector]) &#123;</div><div class="line"><span class="meta">#pragma clang diagnostic push</span></div><div class="line"><span class="meta">#pragma clang diagnostic ignored <span class="meta-string">"-Warc-performSelector-leaks"</span></span></div><div class="line">            [presentingVC performSelector:selector];</div><div class="line"><span class="meta">#pragma clang diagnostic pop</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> *  @author 叶帆</div><div class="line"> *</div><div class="line"> *  @brief  App终止程序是保存Core Data Context</div><div class="line"> */</div><div class="line">- (<span class="keyword">void</span>)applicationWillTerminate:(<span class="built_in">UIApplication</span> *)application</div><div class="line">&#123;</div><div class="line">    <span class="comment">// Saves changes in the application's managed object context before the application terminates.</span></div><div class="line">    [<span class="keyword">self</span> saveContext];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> *  @author 叶帆</div><div class="line"> *</div><div class="line"> *  @brief  推送常用的函数处理</div><div class="line"> */</div><div class="line"><span class="meta">#pragma mark - XGPush Message</span></div><div class="line">- (<span class="keyword">void</span>)application:(<span class="built_in">UIApplication</span> *)application didRegisterForRemoteNotificationsWithDeviceToken:(<span class="built_in">NSData</span> *)deviceToken</div><div class="line">&#123;</div><div class="line">    <span class="built_in">NSString</span> * deviceTokenStr = [XGPush registerDevice:deviceToken];</div><div class="line">    DebugLog(<span class="string">@"deviceTokenStr : %@"</span>, deviceTokenStr);</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)application:(<span class="built_in">UIApplication</span> *)application didReceiveRemoteNotification:(<span class="built_in">NSDictionary</span> *)userInfo</div><div class="line">&#123;</div><div class="line">    DebugLog(<span class="string">@"didReceiveRemoteNotification-userInfo:-----\n%@"</span>, userInfo);</div><div class="line">    [XGPush handleReceiveNotification:userInfo];</div><div class="line">    [BaseViewController handleNotificationInfo:userInfo applicationState:[application applicationState]];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">#pragma mark - Methods Private</span></div><div class="line">- (<span class="keyword">void</span>)setupLoginViewController&#123;</div><div class="line">    LoginViewController *loginVC = [[LoginViewController alloc] init];</div><div class="line">    [<span class="keyword">self</span>.window setRootViewController:[[BaseNavigationController alloc] initWithRootViewController:loginVC]];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)setupIntroductionViewController&#123;</div><div class="line">    IntroductionViewController *introductionVC = [[IntroductionViewController alloc] init];</div><div class="line"><span class="comment">//    [self.window setRootViewController:[[BaseNavigationController alloc] initWithRootViewController:introductionVC]];</span></div><div class="line">    [<span class="keyword">self</span>.window setRootViewController:introductionVC];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)setupTabViewController&#123;</div><div class="line">    RootTabViewController *rootVC = [[RootTabViewController alloc] init];</div><div class="line">    rootVC.tabBar.translucent = <span class="literal">YES</span>;</div><div class="line"></div><div class="line">    [<span class="keyword">self</span>.window setRootViewController:rootVC];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)customizeInterface &#123;</div><div class="line">    <span class="comment">//设置Nav的背景色和title色</span></div><div class="line"></div><div class="line">    <span class="built_in">UINavigationBar</span> *navigationBarAppearance = [<span class="built_in">UINavigationBar</span> appearance];</div><div class="line">    [navigationBarAppearance setBackgroundImage:[<span class="built_in">UIImage</span> imageWithColor:[<span class="built_in">UIColor</span> colorWithHexString:[<span class="built_in">NSObject</span> baseURLStrIsTest]? <span class="string">@"0x3bbd79"</span> : <span class="string">@"0x28303b"</span>]] forBarMetrics:<span class="built_in">UIBarMetricsDefault</span>];</div><div class="line">    [navigationBarAppearance setTintColor:[<span class="built_in">UIColor</span> whiteColor]];<span class="comment">//返回按钮的箭头颜色</span></div><div class="line">    <span class="built_in">NSDictionary</span> *textAttributes = @&#123;</div><div class="line">                                     <span class="built_in">NSFontAttributeName</span>: [<span class="built_in">UIFont</span> boldSystemFontOfSize:kNavTitleFontSize],</div><div class="line">                                     <span class="built_in">NSForegroundColorAttributeName</span>: [<span class="built_in">UIColor</span> whiteColor],</div><div class="line">                                     &#125;;</div><div class="line">    [navigationBarAppearance setTitleTextAttributes:textAttributes];</div><div class="line"></div><div class="line">    [[<span class="built_in">UITextField</span> appearance] setTintColor:[<span class="built_in">UIColor</span> colorWithHexString:<span class="string">@"0x3bbc79"</span>]];<span class="comment">//设置UITextField的光标颜色</span></div><div class="line">    [[<span class="built_in">UITextView</span> appearance] setTintColor:[<span class="built_in">UIColor</span> colorWithHexString:<span class="string">@"0x3bbc79"</span>]];<span class="comment">//设置UITextView的光标颜色</span></div><div class="line">    [[<span class="built_in">UISearchBar</span> appearance] setBackgroundImage:[<span class="built_in">UIImage</span> imageWithColor:kColorTableSectionBg] forBarPosition:<span class="number">0</span> barMetrics:<span class="built_in">UIBarMetricsDefault</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> *  @author 叶帆</div><div class="line"> *</div><div class="line"> *  @brief  URL 模块情况分析</div><div class="line">            1.如果是包含coding-net:的情况且不是登录注册的链接，就是正常解析?VC:WebView</div><div class="line">            2.如果是包含coding-net:的情况且是登录注册的链接，那么就是从邮箱跳到Coding客户端，一种是重置密码邮件，一种是账号激活邮件</div><div class="line">            3.如果是包含en-:的情况是跳到Evernote的客户端</div><div class="line">            4.跳转到友盟客户端</div><div class="line"> */</div><div class="line"><span class="meta">#pragma mark URL Schemes</span></div><div class="line">- (<span class="built_in">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application openURL:(<span class="built_in">NSURL</span> *)url sourceApplication:(<span class="built_in">NSString</span> *)sourceApplication annotation:(<span class="keyword">id</span>)annotation&#123;</div><div class="line">    DebugLog(<span class="string">@"path: %@, params: %@"</span>, [url path], [url queryParams]);</div><div class="line">    <span class="keyword">if</span> ([url.absoluteString hasPrefix:kCodingAppScheme]) &#123;</div><div class="line">        <span class="keyword">if</span> (![<span class="keyword">self</span> showPasswordWithURL:url]) &#123;<span class="comment">//如果不是登录注册的链接，就是用正常的解析模式解析</span></div><div class="line">            [BaseViewController presentLinkStr:url.absoluteString];</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">YES</span>;</div><div class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> ([url.absoluteString hasPrefix:<span class="string">@"en-:"</span>])&#123;</div><div class="line">        <span class="keyword">return</span> [[ENSession sharedSession] handleOpenURL:url];</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">        <span class="keyword">return</span>  [UMSocialSnsService handleOpenURL:url];</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> *  @author 叶帆</div><div class="line"> *</div><div class="line"> *  @brief  通过对URL中的关键词分析从而启动应用，并且使用GCD占据主线程弹出临时会话的VC</div><div class="line">            主要实现的是对重置密码和注册后账号激活，从邮箱App跳到Coding客户端的操作</div><div class="line">            成功自动销毁线程回到主线程，方法很赞！</div><div class="line"> */</div><div class="line">- (<span class="built_in">BOOL</span>)showPasswordWithURL:(<span class="built_in">NSURL</span> *)url&#123;</div><div class="line">    PasswordType type;</div><div class="line">    <span class="built_in">NSString</span> *email, *key;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> ([[url lastPathComponent] isEqualToString:<span class="string">@"resetPassword"</span>]) &#123;</div><div class="line">        type = PasswordReset;</div><div class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> ([[url lastPathComponent] isEqualToString:<span class="string">@"activate"</span>])&#123;</div><div class="line">        type = PasswordActivate;</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">NO</span>;</div><div class="line">    &#125;</div><div class="line">    email = [[url queryParams] objectForKey:<span class="string">@"email"</span>];</div><div class="line">    key = [[url queryParams] objectForKey:<span class="string">@"key"</span>];</div><div class="line">    <span class="keyword">if</span> (email.length &lt;= <span class="number">0</span> || key.length &lt;= <span class="number">0</span>) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">NO</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//弹出临时会话</span></div><div class="line">    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(<span class="number">0.3</span> * <span class="built_in">NSEC_PER_SEC</span>)), dispatch_get_main_queue(), ^&#123;</div><div class="line">        PasswordViewController *vc = [PasswordViewController passwordVCWithType:type email:[email URLDecoding] andKey:key];</div><div class="line">        vc.successBlock = ^(PasswordViewController *presentVC, <span class="keyword">id</span> data)&#123;</div><div class="line">            [presentVC dismissViewControllerAnimated:<span class="literal">YES</span> completion:^&#123;</div><div class="line">                <span class="built_in">NSString</span> *tipStr;</div><div class="line">                <span class="keyword">switch</span> (presentVC.type) &#123;</div><div class="line">                    <span class="keyword">case</span> PasswordReset:</div><div class="line">                        tipStr = <span class="string">@"修改密码成功～"</span>;</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                    <span class="keyword">case</span> PasswordActivate:</div><div class="line">                        tipStr = <span class="string">@"账号激活成功～"</span>;</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                    <span class="keyword">default</span>:</div><div class="line">                        tipStr = <span class="string">@"操作成功"</span>;</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                &#125;</div><div class="line">                kTipAlert(<span class="string">@"%@"</span>, tipStr);</div><div class="line">            &#125;];</div><div class="line">        &#125;;</div><div class="line">        [BaseViewController presentVC:vc];</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">#pragma mark - Methods Core Data</span></div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)saveContext</div><div class="line">&#123;</div><div class="line">    <span class="built_in">NSError</span> *error = <span class="literal">nil</span>;</div><div class="line">    <span class="built_in">NSManagedObjectContext</span> *managedObjectContext = <span class="keyword">self</span>.managedObjectContext;</div><div class="line">    <span class="keyword">if</span> (managedObjectContext != <span class="literal">nil</span>) &#123;</div><div class="line">        <span class="keyword">if</span> ([managedObjectContext hasChanges] &amp;&amp; ![managedObjectContext save:&amp;error]) &#123;</div><div class="line">             <span class="comment">// Replace this implementation with code to handle the error appropriately.</span></div><div class="line">             <span class="comment">// abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.</span></div><div class="line">            DebugLog(<span class="string">@"Unresolved error %@, %@"</span>, error, [error userInfo]);</div><div class="line">            abort();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">#pragma mark - Core Data stack</span></div><div class="line"></div><div class="line"><span class="comment">// Returns the managed object context for the application.</span></div><div class="line"><span class="comment">// If the context doesn't already exist, it is created and bound to the persistent store coordinator for the application.</span></div><div class="line">- (<span class="built_in">NSManagedObjectContext</span> *)managedObjectContext</div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (_managedObjectContext != <span class="literal">nil</span>) &#123;</div><div class="line">        <span class="keyword">return</span> _managedObjectContext;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="built_in">NSPersistentStoreCoordinator</span> *coordinator = [<span class="keyword">self</span> persistentStoreCoordinator];</div><div class="line">    <span class="keyword">if</span> (coordinator != <span class="literal">nil</span>) &#123;</div><div class="line">        _managedObjectContext = [[<span class="built_in">NSManagedObjectContext</span> alloc] init];</div><div class="line">        [_managedObjectContext setPersistentStoreCoordinator:coordinator];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> _managedObjectContext;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Returns the managed object model for the application.</span></div><div class="line"><span class="comment">// If the model doesn't already exist, it is created from the application's model.</span></div><div class="line">- (<span class="built_in">NSManagedObjectModel</span> *)managedObjectModel</div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (_managedObjectModel != <span class="literal">nil</span>) &#123;</div><div class="line">        <span class="keyword">return</span> _managedObjectModel;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">NSURL</span> *modelURL = [[<span class="built_in">NSBundle</span> mainBundle] URLForResource:<span class="string">@"Coding_iOS"</span> withExtension:<span class="string">@"momd"</span>];</div><div class="line">    _managedObjectModel = [[<span class="built_in">NSManagedObjectModel</span> alloc] initWithContentsOfURL:modelURL];</div><div class="line">    <span class="keyword">return</span> _managedObjectModel;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Returns the persistent store coordinator for the application.</span></div><div class="line"><span class="comment">// If the coordinator doesn't already exist, it is created and the application's store added to it.</span></div><div class="line">- (<span class="built_in">NSPersistentStoreCoordinator</span> *)persistentStoreCoordinator</div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (_persistentStoreCoordinator != <span class="literal">nil</span>) &#123;</div><div class="line">        <span class="keyword">return</span> _persistentStoreCoordinator;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="built_in">NSURL</span> *storeURL = [[<span class="keyword">self</span> applicationDocumentsDirectory] URLByAppendingPathComponent:<span class="string">@"Coding_iOS.sqlite"</span>];</div><div class="line"></div><div class="line">    <span class="built_in">NSError</span> *error = <span class="literal">nil</span>;</div><div class="line">    _persistentStoreCoordinator = [[<span class="built_in">NSPersistentStoreCoordinator</span> alloc] initWithManagedObjectModel:[<span class="keyword">self</span> managedObjectModel]];</div><div class="line">    <span class="keyword">if</span> (![_persistentStoreCoordinator addPersistentStoreWithType:<span class="built_in">NSSQLiteStoreType</span> configuration:<span class="literal">nil</span> URL:storeURL options:<span class="literal">nil</span> error:&amp;error]) &#123;</div><div class="line">        <span class="comment">/*</span></div><div class="line">         Replace this implementation with code to handle the error appropriately.</div><div class="line"></div><div class="line">         abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.</div><div class="line"></div><div class="line">         Typical reasons for an error here include:</div><div class="line">         * The persistent store is not accessible;</div><div class="line">         * The schema for the persistent store is incompatible with current managed object model.</div><div class="line">         Check the error message to determine what the actual problem was.</div><div class="line"></div><div class="line"></div><div class="line">         If the persistent store is not accessible, there is typically something wrong with the file path. Often, a file URL is pointing into the application's resources directory instead of a writeable directory.</div><div class="line"></div><div class="line">         If you encounter schema incompatibility errors during development, you can reduce their frequency by:</div><div class="line">         * Simply deleting the existing store:</div><div class="line">         [[NSFileManager defaultManager] removeItemAtURL:storeURL error:nil]</div><div class="line"></div><div class="line">         * Performing automatic lightweight migration by passing the following dictionary as the options parameter:</div><div class="line">         @&#123;NSMigratePersistentStoresAutomaticallyOption:@YES, NSInferMappingModelAutomaticallyOption:@YES&#125;</div><div class="line"></div><div class="line">         Lightweight migration will only work for a limited set of schema changes; consult "Core Data Model Versioning and Data Migration Programming Guide" for details.</div><div class="line"></div><div class="line">         */</div><div class="line">        DebugLog(<span class="string">@"Unresolved error %@, %@"</span>, error, [error userInfo]);</div><div class="line">        abort();</div><div class="line">    &#125;    </div><div class="line"></div><div class="line">    <span class="keyword">return</span> _persistentStoreCoordinator;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">#pragma mark - Application's Documents directory</span></div><div class="line"></div><div class="line"><span class="comment">// Returns the URL to the application's Documents directory.</span></div><div class="line">- (<span class="built_in">NSURL</span> *)applicationDocumentsDirectory</div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> [[[<span class="built_in">NSFileManager</span> defaultManager] URLsForDirectory:<span class="built_in">NSDocumentDirectory</span> inDomains:<span class="built_in">NSUserDomainMask</span>] lastObject];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<blockquote class="blockquote-center"><br><strong>版权声明</strong><br><br><img src="/cc.png" alt=""><br><br><a href="http://yeziahehe.com">Ivan’s Blog</a> by <a href="http://yeziahehe.com/about">Ivan Ye</a> is licensed under a <a href="http://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" rel="external">Creative Commons BY-NC-ND 4.0 International License</a>.<br>由<a href="http://yeziahehe.com/about">叶帆</a>创作并维护的<a href="http://yeziahehe.com">叶帆的博客</a>博客采用<a href="http://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" rel="external">创作共用保留署名-非商业-禁止演绎4.0国际许可证</a>。<br><br>本文首发于<a href="http://yeziahehe.com">Ivan’s Blog | 叶帆的博客</a>博客（ <a href="http://yeziahehe.com">http://yeziahehe.com</a> ），版权所有，侵权必究。<br><br>本文链接：<a href="http://yeziahehe.com/2015/10/06/Coding_iOS_client_learning--AppDelegate(update)/">http://yeziahehe.com/2015/10/06/Coding_iOS_client_learning--AppDelegate(update)/</a></blockquote></span>
      
    </div>

    <div>
      
        
  <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
    <div></div>
    <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
      <span>赏</span>
    </button>
    <div id="QR" style="display: none;">
      
        <div id="wechat" style="display: inline-block">
          <img id="wechat_qr" src="http://7xkvt5.com1.z0.glb.clouddn.com/pay/wechat.png" alt="叶帆 WeChat Pay"/>
          <p>微信打赏</p>
        </div>
      
      
        <div id="alipay" style="display: inline-block">
          <img id="alipay_qr" src="http://7xkvt5.com1.z0.glb.clouddn.com/pay/alipay.png" alt="叶帆 Alipay"/>
          <p>支付宝打赏</p>
        </div>
      
    </div>
  </div>


      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/iOS/" rel="tag">#iOS</a>
          
            <a href="/tags/Coding源码/" rel="tag">#Coding源码</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/09/27/Objc_learning--architecture/" rel="next" title="objc中国学习--架构">
                <i class="fa fa-chevron-left"></i> objc中国学习--架构
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2015/10/06/fork_project_sync_update/" rel="prev" title="fork项目同步更新">
                fork项目同步更新 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


        </div>

        


        
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2015/10/06/Coding_iOS_client_learning--AppDelegate(update)/"
           data-title="Coding iOS客户端学习--AppDelegate(持续更新，有关Core Data的内容未来更新)" data-url="http://yeziahehe.com/2015/10/06/Coding_iOS_client_learning--AppDelegate(update)/">
      </div>
    
  </div>


      </div>

      
        
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="http://7xkvt5.com1.z0.glb.clouddn.com/blog%2Favatar.JPG" alt="叶帆" itemprop="image"/>
          <p class="site-author-name" itemprop="name">叶帆</p>
        </div>
        <p class="site-description motion-element" itemprop="description">认真你就赢了</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">37</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">7</span>
              <span class="site-state-item-name">分类</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            
              <span class="site-state-item-count">38</span>
              <span class="site-state-item-name">标签</span>
              
          </div>

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/yeziahehe" target="_blank">
                  
                    <i class="fa fa-github"></i> GitHub
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.linkedin.com/in/yeziahehe" target="_blank">
                  
                    <i class="fa fa-linkedin"></i> Linkedin
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/yeziahehe" target="_blank">
                  
                    <i class="fa fa-weibo"></i> Weibo
                  
                </a>
              </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator">
            <i class="fa fa-angle-double-up"></i>
          </div>
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#u5199_u5728_u524D_u9762"><span class="nav-number">1.</span> <span class="nav-text">写在前面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AppDelegate"><span class="nav-number">2.</span> <span class="nav-text">AppDelegate</span></a></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator">
            <i class="fa fa-angle-double-down"></i>
          </div>
        </section>
      

    </div>
  </aside>


      
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

<div class="copyright" >
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="icon-next-heart fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">叶帆</span>
  <span id="busuanzi_container_site_pv"> | 自2015.12.13起总访问量：<span id="busuanzi_value_site_pv"></span>次</span>

</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
    

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"yeziahehe"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>
    
     


    
  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.2"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.2"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
<script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

<script type="text/javascript" src="/js/motion.js?v=0.4.5.2" id="motion.global"></script>


  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  
<script type="text/javascript" src="/js/bootstrap.scrollspy.js?v=0.4.5.2" id="bootstrap.scrollspy.custom"></script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.motion.complete', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      var $indicator = $(indicator);
      var opacity = action === 'show' ? 1 : 0;
      $indicator.velocity ?
        $indicator.velocity('stop').velocity({
          opacity: opacity
        }, { duration: 100 }) :
        $indicator.stop().animate({
          opacity: opacity
        }, 100);
    }

  });
</script>

<script type="text/javascript" id="sidebar.nav">
  $(document).ready(function () {
    var html = $('html');
    var TAB_ANIMATE_DURATION = 200;
    var hasVelocity = $.isFunction(html.velocity);

    $('.sidebar-nav li').on('click', function () {
      var item = $(this);
      var activeTabClassName = 'sidebar-nav-active';
      var activePanelClassName = 'sidebar-panel-active';
      if (item.hasClass(activeTabClassName)) {
        return;
      }

      var currentTarget = $('.' + activePanelClassName);
      var target = $('.' + item.data('target'));

      hasVelocity ?
        currentTarget.velocity('transition.slideUpOut', TAB_ANIMATE_DURATION, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', TAB_ANIMATE_DURATION)
            .addClass(activePanelClassName);
        }) :
        currentTarget.animate({ opacity: 0 }, TAB_ANIMATE_DURATION, function () {
          currentTarget.hide();
          target
            .stop()
            .css({'opacity': 0, 'display': 'block'})
            .animate({ opacity: 1 }, TAB_ANIMATE_DURATION, function () {
              currentTarget.removeClass(activePanelClassName);
              target.addClass(activePanelClassName);
            });
        });

      item.siblings().removeClass(activeTabClassName);
      item.addClass(activeTabClassName);
    });

    $('.post-toc a').on('click', function (e) {
      e.preventDefault();
      var targetSelector = escapeSelector(this.getAttribute('href'));
      var offset = $(targetSelector).offset().top;
      hasVelocity ?
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        }) :
        $('html, body').stop().animate({
          scrollTop: offset
        }, 500);
    });

    // Expand sidebar on post detail page by default, when post has a toc.
    motionMiddleWares.sidebar = function () {
      var $tocContent = $('.post-toc-content');
      if (CONFIG.sidebar === 'post') {
        if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
          displaySidebar();
        }
      }
    };
  });
</script>



  <script type="text/javascript" src="/js/bootstrap.js"></script>

  
  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>

  
    <script type="text/javascript" src="http://cdn.staticfile.org/mathjax/2.4.0/MathJax.js"></script>
    <script type="text/javascript" src="http://cdn.staticfile.org/mathjax/2.4.0/config/TeX-AMS-MML_HTMLorMML.js"></script>
  


  
  

</body>
</html>
