<!doctype html>
<html class="theme-next   use-motion ">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="google-site-verification" content="ArxqF9fNvIlxybI0naTgEy2PwvvvHyAs35iOfxJqL8o" />










  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.4.5.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Coding源码,iOS," />





  <link rel="alternate" href="/atom.xml" title="叶帆的技术博客" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.2" />






<meta name="description" content="写在前面Coding客户端
AppDelegate
AppDelegate.h

12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152////  AppDelegate.h//  Coding_iOS////  Created by 王 原闯 on 14-7-2">
<meta property="og:type" content="article">
<meta property="og:title" content="Coding iOS客户端学习--AppDelegate(持续更新，有关Core Data的内容未来更新)">
<meta property="og:url" content="http://yeziahehe.com/2015/10/06/Coding_iOS_client_learning--AppDelegate(update)/index.html">
<meta property="og:site_name" content="叶帆的技术博客">
<meta property="og:description" content="写在前面Coding客户端
AppDelegate
AppDelegate.h

12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152////  AppDelegate.h//  Coding_iOS////  Created by 王 原闯 on 14-7-2">
<meta property="og:updated_time" content="2015-12-16T15:29:48.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Coding iOS客户端学习--AppDelegate(持续更新，有关Core Data的内容未来更新)">
<meta name="twitter:description" content="写在前面Coding客户端
AppDelegate
AppDelegate.h

12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152////  AppDelegate.h//  Coding_iOS////  Created by 王 原闯 on 14-7-2">



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    sidebar: 'hide',
    motion: true
  };
</script>

  <title> Coding iOS客户端学习--AppDelegate(持续更新，有关Core Data的内容未来更新) | 叶帆的技术博客 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  






  <div class="container one-column page-post-detail">
    <div class="headband"></div>

    <a href="https://github.com/yeziahehe"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">叶帆的技术博客</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-user fa-fw"></i> <br />
            
            关于
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Coding iOS客户端学习--AppDelegate(持续更新，有关Core Data的内容未来更新)
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-10-06T23:28:44+08:00" content="2015-10-06">
              2015-10-06
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                

              
            </span>
          

          <span class="post-count">
            &nbsp; | &nbsp; 字数
              10,162
          </span>


          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/10/06/Coding_iOS_client_learning--AppDelegate(update)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/10/06/Coding_iOS_client_learning--AppDelegate(update)/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        <span itemprop="articleBody"><h3 id="u5199_u5728_u524D_u9762"><a href="#u5199_u5728_u524D_u9762" class="headerlink" title="写在前面"></a>写在前面</h3><p><a href="https://coding.net/u/coding/p/Coding-iOS/git" target="_blank" rel="external">Coding客户端</a></p>
<h3 id="AppDelegate"><a href="#AppDelegate" class="headerlink" title="AppDelegate"></a>AppDelegate</h3><ul>
<li>AppDelegate.h</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  AppDelegate.h</span></span><br><span class="line"><span class="comment">//  Coding_iOS</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by 王 原闯 on 14-7-29.</span></span><br><span class="line"><span class="comment">//  Copyright (c) 2014年 Coding. All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#import <span class="title">&lt;UIKit/UIKit.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">AppDelegate</span> : <span class="title">UIResponder</span> &lt;<span class="title">UIApplicationDelegate</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) <span class="built_in">UIWindow</span> *window;</span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *  @author 叶帆</span><br><span class="line"> *</span><br><span class="line"> *  @brief  Core Data</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>, <span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSManagedObjectContext</span> *managedObjectContext;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>, <span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSManagedObjectModel</span> *managedObjectModel;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>, <span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSPersistentStoreCoordinator</span> *persistentStoreCoordinator;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *  @author 叶帆</span><br><span class="line"> *</span><br><span class="line"> *  @brief  存储Core Data中的managedObjectContext</span><br><span class="line">            一旦出现managedObjectContext change或者error</span><br><span class="line">            则使用abort()函数[abort()代码层面进行APP的终止，在开发时用于测试使用，线上程序不使用，回引起崩溃]</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)saveContext;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *  @author 叶帆</span><br><span class="line"> *</span><br><span class="line"> *  @brief  Core Data中To access the Documents directory of your applications sandbox</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="built_in">NSURL</span> *)applicationDocumentsDirectory;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *  @author 叶帆</span><br><span class="line"> *</span><br><span class="line"> *  @brief  根据不同的情况设置TabBar主框架，登录界面，引导页为RootViewController</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)setupTabViewController;</span><br><span class="line">- (<span class="keyword">void</span>)setupLoginViewController;</span><br><span class="line">- (<span class="keyword">void</span>)setupIntroductionViewController;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *  注册推送</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)registerPush;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<ul>
<li>AppDelegate.m</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  AppDelegate.m</span></span><br><span class="line"><span class="comment">//  Coding_iOS</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by 王 原闯 on 14-7-29.</span></span><br><span class="line"><span class="comment">//  Copyright (c) 2014年 Coding. All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#define UMSYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(v) ([[[UIDevice currentDevice] systemVersion] compare:v options:NSNumericSearch] != NSOrderedAscending)</span></span><br><span class="line"><span class="preprocessor">#define _IPHONE80_ 80000</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#import <span class="title">"AppDelegate.h"</span></span></span><br><span class="line"><span class="preprocessor">#import <span class="title">"RootTabViewController.h"</span>               //通用 TabBarViewController</span></span><br><span class="line"><span class="preprocessor">#import <span class="title">"LoginViewController.h"</span>                 //登录 VC</span></span><br><span class="line"><span class="preprocessor">#import <span class="title">"AFNetworking.h"</span>                        //网络库</span></span><br><span class="line"><span class="preprocessor">#import <span class="title">"AFNetworkActivityIndicatorManager.h"</span>   //网络小菊花</span></span><br><span class="line"><span class="preprocessor">#import <span class="title">"Login.h"</span>                               //Login Model</span></span><br><span class="line"><span class="preprocessor">#import <span class="title">"UnReadManager.h"</span>                       //未读消息 Model，同时更新应用角标</span></span><br><span class="line"><span class="preprocessor">#import <span class="title">"XGPush.h"</span>                              //信鸽推送</span></span><br><span class="line"><span class="preprocessor">#import <span class="title">"EaseStartView.h"</span>                       //启动图</span></span><br><span class="line"><span class="preprocessor">#import <span class="title">"BaseNavigationController.h"</span>            //通用 NavigationController</span></span><br><span class="line"><span class="preprocessor">#import <span class="title">"PasswordViewController.h"</span>              //用户激活或者密码 VC</span></span><br><span class="line"><span class="preprocessor">#import <span class="title">"IntroductionViewController.h"</span>          //引导 VC</span></span><br><span class="line"><span class="preprocessor">#import <span class="title">"FunctionIntroManager.h"</span>                //引导 Model</span></span><br><span class="line"><span class="preprocessor">#import <span class="title">&lt;UMengSocial/UMSocial.h&gt;</span>                //友盟统计分析组件</span></span><br><span class="line"><span class="preprocessor">#import <span class="title">&lt;UMengSocial/UMSocialWechatHandler.h&gt;</span>   //友盟WeChat分享组件</span></span><br><span class="line"><span class="preprocessor">#import <span class="title">&lt;UMengSocial/UMSocialQQHandler.h&gt;</span>       //友盟QQ分享组件</span></span><br><span class="line"><span class="preprocessor">#import <span class="title">&lt;evernote-cloud-sdk-ios/ENSDK/ENSDK.h&gt;</span>  //印象笔记SDK</span></span><br><span class="line"><span class="preprocessor">#import <span class="title">"UMSocialSinaSSOHandler.h"</span>              //友盟Sina分享组件</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#import <span class="title">"Tweet.h"</span></span></span><br><span class="line"><span class="preprocessor">#import <span class="title">"sys/utsname.h"</span>                         //Apple提供的获取设备硬件版本和系统版本</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">AppDelegate</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@synthesize</span> managedObjectContext = _managedObjectContext;</span><br><span class="line"><span class="keyword">@synthesize</span> managedObjectModel = _managedObjectModel;</span><br><span class="line"><span class="keyword">@synthesize</span> persistentStoreCoordinator = _persistentStoreCoordinator;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *  @author 叶帆</span><br><span class="line"> *</span><br><span class="line"> *  @brief  信鸽推送</span><br><span class="line">            区分 iOS 7, iOS 8, iOS 9 推送模式 (下个版本不支持iOS 7)</span><br><span class="line">            1. app在前台运行时，不弹出推送框，但是app通过代码可以获取到推送的消息。</span><br><span class="line">            2. app在后台运行或者杀死状态时，会弹出推送框并且可以通过代码获取到推送的消息。</span><br><span class="line">            3. app在前台和后台运行时，推送上报触发的是didReceiveRemoteNotification事件。</span><br><span class="line">            4. app在杀死状态时，推送上报触发的是didFinishLaunchingWithOptions事件。</span><br><span class="line"> */</span></span><br><span class="line"><span class="preprocessor">#pragma mark XGPush</span></span><br><span class="line">- (<span class="keyword">void</span>)registerPush&#123;</span><br><span class="line">    <span class="keyword">float</span> sysVer = [[[<span class="built_in">UIDevice</span> currentDevice] systemVersion] floatValue];</span><br><span class="line">    <span class="keyword">if</span>(sysVer &lt; <span class="number">8</span>)&#123;</span><br><span class="line">        [[<span class="built_in">UIApplication</span> sharedApplication] registerForRemoteNotificationTypes:(<span class="built_in">UIRemoteNotificationTypeAlert</span> | <span class="built_in">UIRemoteNotificationTypeBadge</span> | <span class="built_in">UIRemoteNotificationTypeSound</span>)];</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="preprocessor">#if __IPHONE_OS_VERSION_MAX_ALLOWED &gt;= _IPHONE80_</span></span><br><span class="line">        <span class="built_in">UIMutableUserNotificationCategory</span> *categorys = [[<span class="built_in">UIMutableUserNotificationCategory</span> alloc] init];</span><br><span class="line">        <span class="built_in">UIUserNotificationSettings</span> *userSettings = [<span class="built_in">UIUserNotificationSettings</span> settingsForTypes:<span class="built_in">UIUserNotificationTypeBadge</span>|<span class="built_in">UIUserNotificationTypeSound</span>|<span class="built_in">UIUserNotificationTypeAlert</span></span><br><span class="line">                                                                                     categories:[<span class="built_in">NSSet</span> setWithObject:categorys]];</span><br><span class="line">        [[<span class="built_in">UIApplication</span> sharedApplication] registerUserNotificationSettings:userSettings];</span><br><span class="line">        [[<span class="built_in">UIApplication</span> sharedApplication] registerForRemoteNotifications];</span><br><span class="line"><span class="preprocessor">#endif</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *  @author 叶帆</span><br><span class="line"> *</span><br><span class="line"> *  @brief  UserAgent 加入版本号到header中user agent</span><br><span class="line"> */</span></span><br><span class="line"><span class="preprocessor">#pragma mark UserAgent</span></span><br><span class="line">- (<span class="keyword">void</span>)registerUserAgent&#123;</span><br><span class="line">    <span class="keyword">struct</span> utsname systemInfo;</span><br><span class="line">    uname(&amp;systemInfo);</span><br><span class="line">    <span class="built_in">NSString</span> *deviceString = [<span class="built_in">NSString</span> stringWithCString:systemInfo<span class="variable">.machine</span> encoding:<span class="built_in">NSUTF8StringEncoding</span>];</span><br><span class="line">    <span class="built_in">NSString</span> *userAgent = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%@/%@ (%@; iOS %@; Scale/%0.2f)"</span>, [[[<span class="built_in">NSBundle</span> mainBundle] infoDictionary] objectForKey:(__bridge <span class="built_in">NSString</span> *)k<span class="built_in">CFBundleExecutableKey</span>] ?: [[[<span class="built_in">NSBundle</span> mainBundle] infoDictionary] objectForKey:(__bridge <span class="built_in">NSString</span> *)k<span class="built_in">CFBundleIdentifierKey</span>], (__bridge <span class="keyword">id</span>)<span class="built_in">CFBundleGetValueForInfoDictionaryKey</span>(<span class="built_in">CFBundleGetMainBundle</span>(), k<span class="built_in">CFBundleVersionKey</span>) ?: [[[<span class="built_in">NSBundle</span> mainBundle] infoDictionary] objectForKey:(__bridge <span class="built_in">NSString</span> *)k<span class="built_in">CFBundleVersionKey</span>], deviceString, [[<span class="built_in">UIDevice</span> currentDevice] systemVersion], ([[<span class="built_in">UIScreen</span> mainScreen] respondsToSelector:<span class="keyword">@selector</span>(scale)] ? [[<span class="built_in">UIScreen</span> mainScreen] scale] : <span class="number">1.0</span>f)];</span><br><span class="line">    <span class="built_in">NSDictionary</span> *dictionary = @&#123;<span class="string">@"UserAgent"</span> : userAgent&#125;;<span class="comment">//User-Agent</span></span><br><span class="line">    [[<span class="built_in">NSUserDefaults</span> standardUserDefaults] registerDefaults:dictionary];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#pragma lifeCycle</span></span><br><span class="line">- (<span class="built_in">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application didFinishLaunchingWithOptions:(<span class="built_in">NSDictionary</span> *)launchOptions</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">self</span><span class="variable">.window</span> = [[<span class="built_in">UIWindow</span> alloc] initWithFrame:[[<span class="built_in">UIScreen</span> mainScreen] bounds]];</span><br><span class="line">    <span class="comment">// Override point for customization after application launch.</span></span><br><span class="line">    <span class="keyword">self</span><span class="variable">.window</span><span class="variable">.backgroundColor</span> = [<span class="built_in">UIColor</span> whiteColor];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//网络</span></span><br><span class="line">    [[AFNetworkActivityIndicatorManager sharedManager] setEnabled:<span class="literal">YES</span>];</span><br><span class="line">    [[AFNetworkReachabilityManager sharedManager] startMonitoring];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//sd加载的数据类型</span></span><br><span class="line">    [[[SDWebImageManager sharedManager] imageDownloader] setValue:<span class="string">@"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8"</span> forHTTPHeaderField:<span class="string">@"Accept"</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置导航条样式</span></span><br><span class="line">    [<span class="keyword">self</span> customizeInterface];</span><br><span class="line">    [[<span class="built_in">UIApplication</span> sharedApplication] setStatusBarHidden:<span class="literal">NO</span> withAnimation:<span class="built_in">UIStatusBarAnimationFade</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//UIWebView 的 User-Agent</span></span><br><span class="line">    [<span class="keyword">self</span> registerUserAgent];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ([Login isLogin]) &#123;</span><br><span class="line">        [<span class="keyword">self</span> setupTabViewController];</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        [<span class="built_in">UIApplication</span> sharedApplication]<span class="variable">.applicationIconBadgeNumber</span> = <span class="number">0</span>;</span><br><span class="line">        [<span class="keyword">self</span> setupIntroductionViewController];</span><br><span class="line">    &#125;</span><br><span class="line">    [<span class="keyword">self</span><span class="variable">.window</span> makeKeyAndVisible];</span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     *  @author 叶帆</span><br><span class="line">     *</span><br><span class="line">     *  @brief  特殊引导页，用来显示节日或者重要的引导信息，与引导页不同，引导页所做的是登录是引导界面</span><br><span class="line">     */</span></span><br><span class="line">    [FunctionIntroManager showIntroPage];</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     *  @author 叶帆</span><br><span class="line">     *</span><br><span class="line">     *  @brief  欢迎页图片的显示动画</span><br><span class="line">     */</span></span><br><span class="line">    EaseStartView *startView = [EaseStartView startView];</span><br><span class="line">    @weakify(<span class="keyword">self</span>);</span><br><span class="line">    [startView startAnimationWithCompletionBlock:^(EaseStartView *easeStartView) &#123;</span><br><span class="line">        @strongify(<span class="keyword">self</span>);</span><br><span class="line">        [<span class="keyword">self</span> completionStartAnimationWithOptions:launchOptions];</span><br><span class="line">    &#125;];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *  @author 叶帆</span><br><span class="line"> *</span><br><span class="line"> *  @brief  处理消息推送，用于固定推送的页面跳转和消息的状态</span><br><span class="line">            加入友盟统计，社会化分享组件</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)completionStartAnimationWithOptions:(<span class="built_in">NSDictionary</span> *)launchOptions&#123;</span><br><span class="line">    <span class="keyword">if</span> ([Login isLogin]) &#123;</span><br><span class="line">        <span class="built_in">NSDictionary</span> *remoteNotification = [launchOptions valueForKey:<span class="built_in">UIApplicationLaunchOptionsRemoteNotificationKey</span>];</span><br><span class="line">        <span class="keyword">if</span> (remoteNotification) &#123;</span><br><span class="line">            [BaseViewController handleNotificationInfo:remoteNotification applicationState:<span class="built_in">UIApplicationStateInactive</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//    UMENG 统计</span></span><br><span class="line">    [MobClick startWithAppkey:kUmeng_AppKey reportPolicy:BATCH channelId:<span class="literal">nil</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//    UMENG Social Account</span></span><br><span class="line">    [UMSocialData setAppKey:kUmeng_AppKey];</span><br><span class="line">    [UMSocialWechatHandler setWXAppId:kSocial_WX_ID appSecret:kSocial_WX_Secret url:[<span class="built_in">NSObject</span> baseURLStr]];</span><br><span class="line">    [UMSocialQQHandler setQQWithAppId:kSocial_QQ_ID appKey:kSocial_QQ_Secret url:[<span class="built_in">NSObject</span> baseURLStr]];</span><br><span class="line">    [E<span class="built_in">NSession</span> setSharedSessionConsumerKey:kSocial_EN_Key consumerSecret:kSocial_EN_Secret optionalHost:<span class="literal">nil</span>];</span><br><span class="line">    [UMSocialSinaSSOHandler openNewSinaSSOWithRedirectURL:kSocial_Sina_RedirectURL];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//    UMENG Social Config</span></span><br><span class="line">    [UMSocialConfig setFollowWeiboUids:@&#123;UMShareToSina : kSocial_Sina_OfficailAccount&#125;];<span class="comment">//设置默认关注官方账号</span></span><br><span class="line">    [UMSocialConfig setFinishToastIsHidden:<span class="literal">YES</span> position:UMSocialiToastPositionCenter];</span><br><span class="line">    [UMSocialConfig setNavigationBarConfig:^(<span class="built_in">UINavigationBar</span> *bar, <span class="built_in">UIButton</span> *closeButton, <span class="built_in">UIButton</span> *backButton, <span class="built_in">UIButton</span> *postButton, <span class="built_in">UIButton</span> *refreshButton, <span class="built_in">UINavigationItem</span> *navigationItem) &#123;</span><br><span class="line">        <span class="keyword">if</span> (bar) &#123;</span><br><span class="line">            [bar setBackgroundImage:[<span class="built_in">UIImage</span> imageWithColor:[<span class="built_in">UIColor</span> colorWithHexString:[<span class="built_in">NSObject</span> baseURLStrIsTest]? <span class="string">@"0x3bbd79"</span> : <span class="string">@"0x28303b"</span>]] forBarMetrics:<span class="built_in">UIBarMetricsDefault</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (navigationItem) &#123;</span><br><span class="line">            <span class="keyword">if</span> ([[navigationItem titleView] isKindOfClass:[<span class="built_in">UILabel</span> class]]) &#123;</span><br><span class="line">                <span class="built_in">UILabel</span> *titleL = (<span class="built_in">UILabel</span> *)[navigationItem titleView];</span><br><span class="line">                titleL<span class="variable">.font</span> = [<span class="built_in">UIFont</span> boldSystemFontOfSize:kNavTitleFontSize];</span><br><span class="line">                titleL<span class="variable">.textColor</span> = [<span class="built_in">UIColor</span> whiteColor];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//    信鸽推送</span></span><br><span class="line">    [XGPush startApp:kXGPush_Id appKey:kXGPush_Key];</span><br><span class="line">    [Login setXGAccountWithCurUser];</span><br><span class="line">    <span class="comment">//注销之后需要再次注册前的准备</span></span><br><span class="line">    @weakify(<span class="keyword">self</span>);</span><br><span class="line">    <span class="keyword">void</span> (^successCallback)(<span class="keyword">void</span>) = ^(<span class="keyword">void</span>)&#123;</span><br><span class="line">        <span class="comment">//如果变成需要注册状态</span></span><br><span class="line">        <span class="keyword">if</span>(![XGPush isUnRegisterStatus] &amp;&amp; [Login isLogin])&#123;</span><br><span class="line">            @strongify(<span class="keyword">self</span>);</span><br><span class="line">            [<span class="keyword">self</span> registerPush];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    [XGPush initForReregister:successCallback];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//[XGPush registerPush];  //注册Push服务，注册后才能收到推送</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//推送反馈(app不在前台运行时，点击推送激活时。统计而已)</span></span><br><span class="line">    [XGPush handleLaunching:launchOptions];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)applicationWillResignActive:(<span class="built_in">UIApplication</span> *)application</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.</span></span><br><span class="line">    <span class="comment">// Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.</span></span><br><span class="line">    [[ImageSizeManager shareManager] save];</span><br><span class="line">    [[Tweet tweetForSend] saveSendData];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)applicationDidEnterBackground:(<span class="built_in">UIApplication</span> *)application</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later.</span></span><br><span class="line">    <span class="comment">// If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)applicationWillEnterForeground:(<span class="built_in">UIApplication</span> *)application</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *  @author 叶帆</span><br><span class="line"> *</span><br><span class="line"> *  @brief  App Become Active 处理未读消息的操作</span><br><span class="line">            使用了clang push &amp; pop 用于保存和恢复编译器的状态，目的是消除当前的警告</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)applicationDidBecomeActive:(<span class="built_in">UIApplication</span> *)application</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.</span></span><br><span class="line">    <span class="keyword">if</span> ([Login isLogin]) &#123;</span><br><span class="line">        [[UnReadManager shareManager] updateUnRead];</span><br><span class="line">        <span class="built_in">UIViewController</span> *presentingVC = [BaseViewController presentingVC];</span><br><span class="line">        SEL selector = <span class="built_in">NSSelectorFromString</span>(<span class="string">@"refresh"</span>);</span><br><span class="line">        <span class="keyword">if</span> ([presentingVC isKindOfClass:<span class="built_in">NSClassFromString</span>(<span class="string">@"Message_RootViewController"</span>)]</span><br><span class="line">            &amp;&amp; [presentingVC respondsToSelector:selector]) &#123;</span><br><span class="line"><span class="preprocessor">#pragma clang diagnostic push</span></span><br><span class="line"><span class="preprocessor">#pragma clang diagnostic ignored <span class="title">"-Warc-performSelector-leaks"</span></span></span><br><span class="line">            [presentingVC performSelector:selector];</span><br><span class="line"><span class="preprocessor">#pragma clang diagnostic pop</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *  @author 叶帆</span><br><span class="line"> *</span><br><span class="line"> *  @brief  App终止程序是保存Core Data Context</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)applicationWillTerminate:(<span class="built_in">UIApplication</span> *)application</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Saves changes in the application's managed object context before the application terminates.</span></span><br><span class="line">    [<span class="keyword">self</span> saveContext];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *  @author 叶帆</span><br><span class="line"> *</span><br><span class="line"> *  @brief  推送常用的函数处理</span><br><span class="line"> */</span></span><br><span class="line"><span class="preprocessor">#pragma mark - XGPush Message</span></span><br><span class="line">- (<span class="keyword">void</span>)application:(<span class="built_in">UIApplication</span> *)application didRegisterForRemoteNotificationsWithDeviceToken:(<span class="built_in">NSData</span> *)deviceToken</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSString</span> * deviceTokenStr = [XGPush registerDevice:deviceToken];</span><br><span class="line">    DebugLog(<span class="string">@"deviceTokenStr : %@"</span>, deviceTokenStr);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)application:(<span class="built_in">UIApplication</span> *)application didReceiveRemoteNotification:(<span class="built_in">NSDictionary</span> *)userInfo</span><br><span class="line">&#123;</span><br><span class="line">    DebugLog(<span class="string">@"didReceiveRemoteNotification-userInfo:-----\n%@"</span>, userInfo);</span><br><span class="line">    [XGPush handleReceiveNotification:userInfo];</span><br><span class="line">    [BaseViewController handleNotificationInfo:userInfo applicationState:[application applicationState]];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#pragma mark - Methods Private</span></span><br><span class="line">- (<span class="keyword">void</span>)setupLoginViewController&#123;</span><br><span class="line">    LoginViewController *loginVC = [[LoginViewController alloc] init];</span><br><span class="line">    [<span class="keyword">self</span><span class="variable">.window</span> setRootViewController:[[BaseNavigationController alloc] initWithRootViewController:loginVC]];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)setupIntroductionViewController&#123;</span><br><span class="line">    IntroductionViewController *introductionVC = [[IntroductionViewController alloc] init];</span><br><span class="line"><span class="comment">//    [self.window setRootViewController:[[BaseNavigationController alloc] initWithRootViewController:introductionVC]];</span></span><br><span class="line">    [<span class="keyword">self</span><span class="variable">.window</span> setRootViewController:introductionVC];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)setupTabViewController&#123;</span><br><span class="line">    RootTabViewController *rootVC = [[RootTabViewController alloc] init];</span><br><span class="line">    rootVC<span class="variable">.tabBar</span><span class="variable">.translucent</span> = <span class="literal">YES</span>;</span><br><span class="line"></span><br><span class="line">    [<span class="keyword">self</span><span class="variable">.window</span> setRootViewController:rootVC];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)customizeInterface &#123;</span><br><span class="line">    <span class="comment">//设置Nav的背景色和title色</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">UINavigationBar</span> *navigationBarAppearance = [<span class="built_in">UINavigationBar</span> appearance];</span><br><span class="line">    [navigationBarAppearance setBackgroundImage:[<span class="built_in">UIImage</span> imageWithColor:[<span class="built_in">UIColor</span> colorWithHexString:[<span class="built_in">NSObject</span> baseURLStrIsTest]? <span class="string">@"0x3bbd79"</span> : <span class="string">@"0x28303b"</span>]] forBarMetrics:<span class="built_in">UIBarMetricsDefault</span>];</span><br><span class="line">    [navigationBarAppearance setTintColor:[<span class="built_in">UIColor</span> whiteColor]];<span class="comment">//返回按钮的箭头颜色</span></span><br><span class="line">    <span class="built_in">NSDictionary</span> *textAttributes = @&#123;</span><br><span class="line">                                     <span class="built_in">NSFontAttributeName</span>: [<span class="built_in">UIFont</span> boldSystemFontOfSize:kNavTitleFontSize],</span><br><span class="line">                                     <span class="built_in">NSForegroundColorAttributeName</span>: [<span class="built_in">UIColor</span> whiteColor],</span><br><span class="line">                                     &#125;;</span><br><span class="line">    [navigationBarAppearance setTitleTextAttributes:textAttributes];</span><br><span class="line"></span><br><span class="line">    [[<span class="built_in">UITextField</span> appearance] setTintColor:[<span class="built_in">UIColor</span> colorWithHexString:<span class="string">@"0x3bbc79"</span>]];<span class="comment">//设置UITextField的光标颜色</span></span><br><span class="line">    [[<span class="built_in">UITextView</span> appearance] setTintColor:[<span class="built_in">UIColor</span> colorWithHexString:<span class="string">@"0x3bbc79"</span>]];<span class="comment">//设置UITextView的光标颜色</span></span><br><span class="line">    [[<span class="built_in">UISearchBar</span> appearance] setBackgroundImage:[<span class="built_in">UIImage</span> imageWithColor:kColorTableSectionBg] forBarPosition:<span class="number">0</span> barMetrics:<span class="built_in">UIBarMetricsDefault</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *  @author 叶帆</span><br><span class="line"> *</span><br><span class="line"> *  @brief  URL 模块情况分析</span><br><span class="line">            1.如果是包含coding-net:的情况且不是登录注册的链接，就是正常解析?VC:WebView</span><br><span class="line">            2.如果是包含coding-net:的情况且是登录注册的链接，那么就是从邮箱跳到Coding客户端，一种是重置密码邮件，一种是账号激活邮件</span><br><span class="line">            3.如果是包含en-:的情况是跳到Evernote的客户端</span><br><span class="line">            4.跳转到友盟客户端</span><br><span class="line"> */</span></span><br><span class="line"><span class="preprocessor">#pragma mark URL Schemes</span></span><br><span class="line">- (<span class="built_in">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application openURL:(<span class="built_in">NSURL</span> *)url sourceApplication:(<span class="built_in">NSString</span> *)sourceApplication annotation:(<span class="keyword">id</span>)annotation&#123;</span><br><span class="line">    DebugLog(<span class="string">@"path: %@, params: %@"</span>, [url path], [url queryParams]);</span><br><span class="line">    <span class="keyword">if</span> ([url<span class="variable">.absoluteString</span> hasPrefix:kCodingAppScheme]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (![<span class="keyword">self</span> showPasswordWithURL:url]) &#123;<span class="comment">//如果不是登录注册的链接，就是用正常的解析模式解析</span></span><br><span class="line">            [BaseViewController presentLinkStr:url<span class="variable">.absoluteString</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> ([url<span class="variable">.absoluteString</span> hasPrefix:<span class="string">@"en-:"</span>])&#123;</span><br><span class="line">        <span class="keyword">return</span> [[E<span class="built_in">NSession</span> sharedSession] handleOpenURL:url];</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span>  [UMSocialSnsService handleOpenURL:url];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *  @author 叶帆</span><br><span class="line"> *</span><br><span class="line"> *  @brief  通过对URL中的关键词分析从而启动应用，并且使用GCD占据主线程弹出临时会话的VC</span><br><span class="line">            主要实现的是对重置密码和注册后账号激活，从邮箱App跳到Coding客户端的操作</span><br><span class="line">            成功自动销毁线程回到主线程，方法很赞！</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="built_in">BOOL</span>)showPasswordWithURL:(<span class="built_in">NSURL</span> *)url&#123;</span><br><span class="line">    PasswordType type;</span><br><span class="line">    <span class="built_in">NSString</span> *email, *key;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ([[url lastPathComponent] isEqualToString:<span class="string">@"resetPassword"</span>]) &#123;</span><br><span class="line">        type = PasswordReset;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> ([[url lastPathComponent] isEqualToString:<span class="string">@"activate"</span>])&#123;</span><br><span class="line">        type = PasswordActivate;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NO</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    email = [[url queryParams] objectForKey:<span class="string">@"email"</span>];</span><br><span class="line">    key = [[url queryParams] objectForKey:<span class="string">@"key"</span>];</span><br><span class="line">    <span class="keyword">if</span> (email<span class="variable">.length</span> &lt;= <span class="number">0</span> || key<span class="variable">.length</span> &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NO</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//弹出临时会话</span></span><br><span class="line">    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(<span class="number">0.3</span> * <span class="built_in">NSEC_PER_SEC</span>)), dispatch_get_main_queue(), ^&#123;</span><br><span class="line">        PasswordViewController *vc = [PasswordViewController passwordVCWithType:type email:[email URLDecoding] andKey:key];</span><br><span class="line">        vc<span class="variable">.successBlock</span> = ^(PasswordViewController *presentVC, <span class="keyword">id</span> data)&#123;</span><br><span class="line">            [presentVC dismissViewControllerAnimated:<span class="literal">YES</span> completion:^&#123;</span><br><span class="line">                <span class="built_in">NSString</span> *tipStr;</span><br><span class="line">                <span class="keyword">switch</span> (presentVC<span class="variable">.type</span>) &#123;</span><br><span class="line">                    <span class="keyword">case</span> PasswordReset:</span><br><span class="line">                        tipStr = <span class="string">@"修改密码成功～"</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> PasswordActivate:</span><br><span class="line">                        tipStr = <span class="string">@"账号激活成功～"</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">default</span>:</span><br><span class="line">                        tipStr = <span class="string">@"操作成功"</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                kTipAlert(<span class="string">@"%@"</span>, tipStr);</span><br><span class="line">            &#125;];</span><br><span class="line">        &#125;;</span><br><span class="line">        [BaseViewController presentVC:vc];</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#pragma mark - Methods Core Data</span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)saveContext</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSError</span> *error = <span class="literal">nil</span>;</span><br><span class="line">    <span class="built_in">NSManagedObjectContext</span> *managedObjectContext = <span class="keyword">self</span><span class="variable">.managedObjectContext</span>;</span><br><span class="line">    <span class="keyword">if</span> (managedObjectContext != <span class="literal">nil</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> ([managedObjectContext hasChanges] &amp;&amp; ![managedObjectContext save:&amp;error]) &#123;</span><br><span class="line">             <span class="comment">// Replace this implementation with code to handle the error appropriately.</span></span><br><span class="line">             <span class="comment">// abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.</span></span><br><span class="line">            DebugLog(<span class="string">@"Unresolved error %@, %@"</span>, error, [error userInfo]);</span><br><span class="line">            abort();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#pragma mark - Core Data stack</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Returns the managed object context for the application.</span></span><br><span class="line"><span class="comment">// If the context doesn't already exist, it is created and bound to the persistent store coordinator for the application.</span></span><br><span class="line">- (<span class="built_in">NSManagedObjectContext</span> *)managedObjectContext</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (_managedObjectContext != <span class="literal">nil</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> _managedObjectContext;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">NSPersistentStoreCoordinator</span> *coordinator = [<span class="keyword">self</span> persistentStoreCoordinator];</span><br><span class="line">    <span class="keyword">if</span> (coordinator != <span class="literal">nil</span>) &#123;</span><br><span class="line">        _managedObjectContext = [[<span class="built_in">NSManagedObjectContext</span> alloc] init];</span><br><span class="line">        [_managedObjectContext setPersistentStoreCoordinator:coordinator];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> _managedObjectContext;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Returns the managed object model for the application.</span></span><br><span class="line"><span class="comment">// If the model doesn't already exist, it is created from the application's model.</span></span><br><span class="line">- (<span class="built_in">NSManagedObjectModel</span> *)managedObjectModel</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (_managedObjectModel != <span class="literal">nil</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> _managedObjectModel;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">NSURL</span> *modelURL = [[<span class="built_in">NSBundle</span> mainBundle] URLForResource:<span class="string">@"Coding_iOS"</span> withExtension:<span class="string">@"momd"</span>];</span><br><span class="line">    _managedObjectModel = [[<span class="built_in">NSManagedObjectModel</span> alloc] initWithContentsOfURL:modelURL];</span><br><span class="line">    <span class="keyword">return</span> _managedObjectModel;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Returns the persistent store coordinator for the application.</span></span><br><span class="line"><span class="comment">// If the coordinator doesn't already exist, it is created and the application's store added to it.</span></span><br><span class="line">- (<span class="built_in">NSPersistentStoreCoordinator</span> *)persistentStoreCoordinator</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (_persistentStoreCoordinator != <span class="literal">nil</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> _persistentStoreCoordinator;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">NSURL</span> *storeURL = [[<span class="keyword">self</span> applicationDocumentsDirectory] URLByAppendingPathComponent:<span class="string">@"Coding_iOS.sqlite"</span>];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">NSError</span> *error = <span class="literal">nil</span>;</span><br><span class="line">    _persistentStoreCoordinator = [[<span class="built_in">NSPersistentStoreCoordinator</span> alloc] initWithManagedObjectModel:[<span class="keyword">self</span> managedObjectModel]];</span><br><span class="line">    <span class="keyword">if</span> (![_persistentStoreCoordinator addPersistentStoreWithType:<span class="built_in">NSSQLiteStoreType</span> configuration:<span class="literal">nil</span> URL:storeURL options:<span class="literal">nil</span> error:&amp;error]) &#123;</span><br><span class="line">        <span class="comment">/*</span><br><span class="line">         Replace this implementation with code to handle the error appropriately.</span><br><span class="line"></span><br><span class="line">         abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.</span><br><span class="line"></span><br><span class="line">         Typical reasons for an error here include:</span><br><span class="line">         * The persistent store is not accessible;</span><br><span class="line">         * The schema for the persistent store is incompatible with current managed object model.</span><br><span class="line">         Check the error message to determine what the actual problem was.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">         If the persistent store is not accessible, there is typically something wrong with the file path. Often, a file URL is pointing into the application's resources directory instead of a writeable directory.</span><br><span class="line"></span><br><span class="line">         If you encounter schema incompatibility errors during development, you can reduce their frequency by:</span><br><span class="line">         * Simply deleting the existing store:</span><br><span class="line">         [[NSFileManager defaultManager] removeItemAtURL:storeURL error:nil]</span><br><span class="line"></span><br><span class="line">         * Performing automatic lightweight migration by passing the following dictionary as the options parameter:</span><br><span class="line">         @&#123;NSMigratePersistentStoresAutomaticallyOption:@YES, NSInferMappingModelAutomaticallyOption:@YES&#125;</span><br><span class="line"></span><br><span class="line">         Lightweight migration will only work for a limited set of schema changes; consult "Core Data Model Versioning and Data Migration Programming Guide" for details.</span><br><span class="line"></span><br><span class="line">         */</span></span><br><span class="line">        DebugLog(<span class="string">@"Unresolved error %@, %@"</span>, error, [error userInfo]);</span><br><span class="line">        abort();</span><br><span class="line">    &#125;    </span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> _persistentStoreCoordinator;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#pragma mark - Application's Documents directory</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Returns the URL to the application's Documents directory.</span></span><br><span class="line">- (<span class="built_in">NSURL</span> *)applicationDocumentsDirectory</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> [[[<span class="built_in">NSFileManager</span> defaultManager] URLsForDirectory:<span class="built_in">NSDocumentDirectory</span> inDomains:<span class="built_in">NSUserDomainMask</span>] lastObject];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
</span>
      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Coding源码/" rel="tag">#Coding源码</a>
          
            <a href="/tags/iOS/" rel="tag">#iOS</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/09/27/Objc_learning--architecture/" rel="next" title="objc中国学习--架构">
                <i class="fa fa-chevron-left"></i> objc中国学习--架构
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2015/10/06/fork_project_sync_update/" rel="prev" title="fork项目同步更新">
                fork项目同步更新 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


        </div>

        

  <p>热评文章</p>
  <div class="ds-top-threads" data-range="weekly" data-num-items="4"></div>


        
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2015/10/06/Coding_iOS_client_learning--AppDelegate(update)/"
           data-title="Coding iOS客户端学习--AppDelegate(持续更新，有关Core Data的内容未来更新)" data-url="http://yeziahehe.com/2015/10/06/Coding_iOS_client_learning--AppDelegate(update)/">
      </div>
    
  </div>


      </div>

      
        
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="http://7xkvt5.com1.z0.glb.clouddn.com/blog%2Favatar.JPG" alt="叶帆" itemprop="image"/>
          <p class="site-author-name" itemprop="name">叶帆</p>
        </div>
        <p class="site-description motion-element" itemprop="description">认真你就赢了</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">27</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">12</span>
              <span class="site-state-item-name">分类</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">31</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/yeziahehe" target="_blank">
                  
                    <i class="fa fa-github"></i> GitHub
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.linkedin.com/in/yeziahehe" target="_blank">
                  
                    <i class="fa fa-linkedin"></i> Linkedin
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/yeziahehe" target="_blank">
                  
                    <i class="fa fa-weibo"></i> Weibo
                  
                </a>
              </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator">
            <i class="fa fa-angle-double-up"></i>
          </div>
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#u5199_u5728_u524D_u9762"><span class="nav-number">1.</span> <span class="nav-text">写在前面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AppDelegate"><span class="nav-number">2.</span> <span class="nav-text">AppDelegate</span></a></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator">
            <i class="fa fa-angle-double-down"></i>
          </div>
        </section>
      

    </div>
  </aside>


      
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="icon-next-heart fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">叶帆</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
    

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"yeziahehe"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>
    
     


    
  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.2"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.2"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
<script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

<script type="text/javascript" src="/js/motion.js?v=0.4.5.2" id="motion.global"></script>


  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  
<script type="text/javascript" src="/js/bootstrap.scrollspy.js?v=0.4.5.2" id="bootstrap.scrollspy.custom"></script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.motion.complete', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      var $indicator = $(indicator);
      var opacity = action === 'show' ? 1 : 0;
      $indicator.velocity ?
        $indicator.velocity('stop').velocity({
          opacity: opacity
        }, { duration: 100 }) :
        $indicator.stop().animate({
          opacity: opacity
        }, 100);
    }

  });
</script>

<script type="text/javascript" id="sidebar.nav">
  $(document).ready(function () {
    var html = $('html');
    var TAB_ANIMATE_DURATION = 200;
    var hasVelocity = $.isFunction(html.velocity);

    $('.sidebar-nav li').on('click', function () {
      var item = $(this);
      var activeTabClassName = 'sidebar-nav-active';
      var activePanelClassName = 'sidebar-panel-active';
      if (item.hasClass(activeTabClassName)) {
        return;
      }

      var currentTarget = $('.' + activePanelClassName);
      var target = $('.' + item.data('target'));

      hasVelocity ?
        currentTarget.velocity('transition.slideUpOut', TAB_ANIMATE_DURATION, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', TAB_ANIMATE_DURATION)
            .addClass(activePanelClassName);
        }) :
        currentTarget.animate({ opacity: 0 }, TAB_ANIMATE_DURATION, function () {
          currentTarget.hide();
          target
            .stop()
            .css({'opacity': 0, 'display': 'block'})
            .animate({ opacity: 1 }, TAB_ANIMATE_DURATION, function () {
              currentTarget.removeClass(activePanelClassName);
              target.addClass(activePanelClassName);
            });
        });

      item.siblings().removeClass(activeTabClassName);
      item.addClass(activeTabClassName);
    });

    $('.post-toc a').on('click', function (e) {
      e.preventDefault();
      var targetSelector = escapeSelector(this.getAttribute('href'));
      var offset = $(targetSelector).offset().top;
      hasVelocity ?
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        }) :
        $('html, body').stop().animate({
          scrollTop: offset
        }, 500);
    });

    // Expand sidebar on post detail page by default, when post has a toc.
    motionMiddleWares.sidebar = function () {
      var $tocContent = $('.post-toc-content');
      if (CONFIG.sidebar === 'post') {
        if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
          displaySidebar();
        }
      }
    };
  });
</script>



  <script type="text/javascript" src="/js/bootstrap.js"></script>

  
  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>

  
    <script type="text/javascript" src="http://cdn.staticfile.org/mathjax/2.4.0/MathJax.js"></script>
    <script type="text/javascript" src="http://cdn.staticfile.org/mathjax/2.4.0/config/TeX-AMS-MML_HTMLorMML.js"></script>
  


  
  

</body>
</html>
